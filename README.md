# ComputerNetworks
 computer networks

# **文本反转TCP程序使用说明**

## **一、项目文件说明**
- reversetcpserver.py：TCP 服务器程序，负责监听客户端连接、接收文本块并执行反转，支持多客户端并发处理。
- reversetcpclient.py：TCP 客户端程序，用于读取文本文件、按规则分割文本块，与服务器交互完成反转，并输出最终结果文件。
- readme.txt：程序运行说明文档，包含环境依赖、配置及操作流程。
- test1.txt：测试样例1，作为客户端发送的输入文件，内容为全英文可打印 ASCII 字符，验证程序的文本反转功能。
- test2.txt：测试样例2，作为客户端发送的输入文件，内容为全英文可打印 ASCII 字符，验证程序的文本反转功能。


## **二、运行环境要求**
- 操作系统：支持 Python 运行的系统（Windows/Linux/macOS 均可）。
- Python 版本：Python 3.6 及以上（需安装标准库 socket、struct、threading 等）。

## **三、程序配置与运行**
### **1. 服务器端（reversetcpserver.py）**
#### **启动命令**
在终端 / 命令行进入程序目录，执行：python reversetcpserver.py <端口号>
**参数说明：**
<端口号>需为 1024-65535 范围内的整数，用于服务器监听客户端连接（如 8888）。
###### **示例**
> python reversetcpserver.py 8888
启动后，服务器将监听 8888 端口，等待客户端连接
### **2. 客户端（reversetcpclient.py）**
#### **启动命令**
在终端 / 命令行进入程序目录，执行：python reversetcpclient.py <服务器IP> <服务器端口> <输入文件路径> <最小块大小> <最大块大小>
**参数说明：**
- <服务器IP>：服务器运行主机的 IP（若服务器与客户端同机，填 127.0.0.1；局域网环境填服务器实际 IP，如 192.168.1.100）。
- <服务器端口>：需与服务器启动时的端口一致（如 8888）。
- <输入文件路径>：待反转的文本文件路径（文件需为纯英文可打印 ASCII 字符，如 test.txt）。
- <最小块大小>：每次发送文本块的最小字节数（需为正整数，如 100）。
- <最大块大小>：每次发送文本块的最大字节数（需为正整数且不小于最小块大小，如 200）。
###### **示例**
> python reversetcpclient.py 127.0.0.1 8888 test.txt 100 200
客户端会连接到 127.0.0.1:8888 的服务器，读取 test.txt 并按 100-200 字节 随机分块，与服务器交互完成文本反转，最终生成反转结果文件（命名为 test_reversed.txt）。

## 四、**程序交互流程**
1. **服务器启动**：监听指定端口，等待客户端连接。
2. **客户端连接**：与服务器建立 TCP 连接，发送 INITIALIZATION 报文（告知文本块总数 N）。
3. **报文交互**：服务器回复 AGREE 报文 → 客户端逐块发送 REVERSE_REQUEST 报文（含文本数据） → 服务器反转文本并回复 REVERSE_ANSWER 报文 → 客户端接收并打印每块反转结果。
4. **结果输出**：客户端将所有反转块拼接，生成最终反转文件（如 test_reversed.txt）。

## **五、注意事项**
1. **端口冲突**：若启动服务器时提示 “端口被占用”，更换其他 1024-65535 范围内的端口（如 8889）。
2. **文件路径**：客户端输入文件路径需正确，若文件不存在会报错。
3. **网络环境**：若客户端与服务器跨网络（非本机），需确保服务器主机开放监听端口（防火墙允许外部连接），且网络可达。

通过以上说明，可快速部署并运行文本反转 TCP 程序，实现多客户端并发的文本反转功能。
